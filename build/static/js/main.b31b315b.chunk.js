(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(e,t,a){e.exports=a(25)},21:function(e,t,a){},23:function(e,t,a){},25:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),i=a.n(l),c=a(2),s=a(3),o=a(5),h=a(4),u=a(6),m=a(1),d=function(e){function t(e){return Object(c.a)(this,t),Object(o.a)(this,Object(h.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("div",null,"Tokyo Library Audio Crawler"),r.a.createElement("div",{className:"show-help",onClick:this.props.showHelp},"HELP"))}}]),t}(n.Component),y=a(7),b=a.n(y),p=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(h.a)(t).call(this,e))).state={search_type_array:[],library_array:[],keyword:"",search_type:"0",checked_library:[]},a.getSearchTypeList=a.getSearchTypeList.bind(Object(m.a)(Object(m.a)(a))),a.getLibraryList=a.getLibraryList.bind(Object(m.a)(Object(m.a)(a))),a.onTextChangeHandler=a.onTextChangeHandler.bind(Object(m.a)(Object(m.a)(a))),a.onRadioHandler=a.onRadioHandler.bind(Object(m.a)(Object(m.a)(a))),a.onCheckHandler=a.onCheckHandler.bind(Object(m.a)(Object(m.a)(a))),a.onButtonClickHandler=a.onButtonClickHandler.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){0===this.state.search_type_array.length&&this.getSearchTypeList(),0===this.state.library_array.length&&this.getLibraryList()}},{key:"getSearchTypeList",value:function(){var e=this;b.a.get("/rest/search_type").retry(0).timeout(6e4).end(function(t,a){if(t)throw new Error("Failed to acquire search_type data!");e.setState({search_type_array:a.body.result})})}},{key:"getLibraryList",value:function(){var e=this;b.a.get("/rest/library").retry(0).timeout(6e4).end(function(t,a){if(t)throw new Error("Failed to acquire library data!");e.setState({library_array:a.body.result})})}},{key:"onTextChangeHandler",value:function(e){this.setState({keyword:e.target.value})}},{key:"onRadioHandler",value:function(e){this.setState({search_type:e.target.value})}},{key:"onCheckHandler",value:function(e){var t=e.target.value,a=this.state.checked_library,n=a.indexOf(t);-1===n?(a.push(t),a.sort()):a.splice(n,1),this.setState({checked_library:a})}},{key:"onButtonClickHandler",value:function(){this.props.crawlLibrary(this.state.keyword,this.state.search_type,this.state.checked_library)}},{key:"render",value:function(){var e=this,t=this.state.search_type_array.map(function(t,a){var n=t.type,l=t.key,i="id_radio_".concat(t.key),c=e.state.search_type==t.key;return r.a.createElement("span",{key:a},r.a.createElement("input",{id:i,type:"radio",name:"type",value:l,checked:c,onChange:e.onRadioHandler}),r.a.createElement("label",{className:"radio-label",htmlFor:i},n))}),a=this.state.library_array.map(function(t,a){var n=t.key,l="id_check_".concat(t.key),i=t.name_en,c=e.state.checked_library.includes(n);return r.a.createElement("span",{key:a},r.a.createElement("input",{id:l,type:"checkbox",name:"library",value:n,checked:c,onChange:e.onCheckHandler}),r.a.createElement("label",{className:"checkbox-label",htmlFor:l},i))}),n=this.props.is_crawling||0===this.state.keyword.length||0===this.state.checked_library.length,l=null;this.props.is_crawling&&(l=r.a.createElement("div",{className:"loading_symbol"}));var i=null;return this.props.is_timeout&&(i=r.a.createElement("aside",{className:"timeout-container"},"One or more library search(es) has timed out(5min). Please use a more specific keyword for an efficient search.")),r.a.createElement("div",{className:"hero-image"},r.a.createElement("div",{className:"search-container"},r.a.createElement("div",{className:"input-container"},r.a.createElement("h1",{className:"input-title"},"Search for keyword:"),r.a.createElement("input",{className:"keyword-input-field",type:"text",autoComplete:"off",onChange:this.onTextChangeHandler})),r.a.createElement("div",{className:"input-container"},r.a.createElement("h2",{className:"input-title"},"Search with keyword as:"),t),r.a.createElement("div",{className:"input-container"},r.a.createElement("h2",{className:"input-title"},"Search libraries in the following wards:"),a),r.a.createElement("button",{className:"search-button",disabled:n,onClick:this.onButtonClickHandler},"SEARCH",l),i))}}]),t}(n.Component),E=function(e){function t(e){return Object(c.a)(this,t),Object(o.a)(this,Object(h.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.crawl_result_array.length,t=this.props.crawl_result_array.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,e.library),r.a.createElement("td",null,r.a.createElement("a",{href:e.link,target:"_blank"},e.title)),r.a.createElement("td",null,e.artist))});return 0===e?r.a.createElement("div",{className:"result-table-container"},r.a.createElement("div",{className:"no-result-container"},r.a.createElement("h1",null,"Your search returned 0 results"),r.a.createElement("h2",null,"...or maybe you just haven't searched yet"))):r.a.createElement("div",{className:"result-table-container"},r.a.createElement("h1",null,"Found: ",e," result(s)"),r.a.createElement("table",{className:"result-table"},r.a.createElement("thead",null,r.a.createElement("th",null,"Library"),r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Artist")),r.a.createElement("tbody",null,t)))}}]),t}(n.Component),f=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(h.a)(t).call(this,e))).state={crawl_result_array:[],is_crawling:!1,is_timeout:!1},a.crawlLibrary=a.crawlLibrary.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"crawlLibrary",value:function(e,t,a){var n=this;this.setState({crawl_result_array:[],is_crawling:!0,is_timeout:!1});var r=0;a.forEach(function(l){var i={keyword:e,search_type:t,library_key:l};b.a.get("/rest/crawl").query({search_option:i}).retry(0).timeout(3e5).end(function(e,t){if(e)return n.setState({is_timeout:!0}),void(++r===a.length&&n.setState({is_crawling:!1}));n.setState({crawl_result_array:n.state.crawl_result_array.concat(t.body.result)}),++r===a.length&&n.setState({is_crawling:!1})})})}},{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement(p,{crawlLibrary:this.crawlLibrary,is_crawling:this.state.is_crawling,is_timeout:this.state.is_timeout}),r.a.createElement(E,{crawl_result_array:this.state.crawl_result_array}))}}]),t}(n.Component),w=function(e){function t(e){return Object(c.a)(this,t),Object(o.a)(this,Object(h.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("footer",null,"FOOTER")}}]),t}(n.Component),v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(h.a)(t).call(this,e))).state={error:!1,info:null},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:!0,info:t})}},{key:"render",value:function(){return this.state.error?r.a.createElement("div",{className:"error-container"},r.a.createElement("h1",null,"There seems to have been an error in the application."),r.a.createElement("h1",null,"Please Refresh the page and try again. If the problem persists, contact me :)")):this.props.children}}]),t}(n.Component),k=function(e){function t(e){return Object(c.a)(this,t),Object(o.a)(this,Object(h.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.show_help?r.a.createElement("div",{className:"help-overlay"},r.a.createElement("div",{className:"help-container"},r.a.createElement("div",{className:"close-help",onClick:this.props.hideHelp},"CLOSE"),r.a.createElement("div",{className:"help-content"},r.a.createElement("div",{className:"help-main-title"},"HELP"),r.a.createElement("div",{className:"help-section-container"},r.a.createElement("div",{className:"help-section-title"},"What even is this?"),r.a.createElement("div",{className:"help-section-text"},"This is a web application that searches libraries in Tokyo for audio media(CD).")),r.a.createElement("div",{className:"help-section-container"},r.a.createElement("div",{className:"help-section-title"},"How do I use this?"),r.a.createElement("div",{className:"help-section-text"},r.a.createElement("ol",null,r.a.createElement("li",null,"Input keyword that you want to search with."),r.a.createElement("li",null,"Input whether you want to search the keyword as the title or the aritst."),r.a.createElement("li",null,"Check which wards you want to search in."),r.a.createElement("li",null,"Click the Search button and wait."),r.a.createElement("li",null,"???"),r.a.createElement("li",null,"PROFIT!")))),r.a.createElement("div",{className:"help-section-container"},r.a.createElement("div",{className:"help-section-title"},"Warnings"),r.a.createElement("div",{className:"help-section-text"},r.a.createElement("ul",null,r.a.createElement("li",null,"Out of the 23 wards in Tokyo, only the 7 listed on this page were compatible with the tool used to search."),r.a.createElement("li",null,"Only a single instance can be run at a time; in other words, if another user is in the middle of his/her search, you will have to wait for his/her search to end before you can start your own."),r.a.createElement("li",null,"Each library gets 5 minutes before it times out."),r.a.createElement("li",null,"This website is designed only for PC."),r.a.createElement("li",null,"This website is designed to be used by chrome, firefox, safari, and edge(NOT INTERNET EXPLORER).")))),r.a.createElement("div",{className:"help-section-container"},r.a.createElement("div",{className:"help-section-title"},"What did you use to make this?"),r.a.createElement("div",{className:"help-section-text"},"The front-end is made with React.js and the back-end is made with node.js(express).")),r.a.createElement("div",{className:"help-section-container"},r.a.createElement("div",{className:"help-section-title"},"How long did this take to make?"),r.a.createElement("div",{className:"help-section-text"},"About a week? If you want to see the process, check out ",r.a.createElement("a",{href:"https://github.com/verhichi/tokyo-library-crawler"},"my github page"),".")),r.a.createElement("div",{className:"help-section-container"},r.a.createElement("div",{className:"help-section-title"},"Why did you make this?"),r.a.createElement("div",{className:"help-section-text"},"I was personally asked by a friend if I could somehow facilitate his library expeditions to find audio media. So I made this for him.")),r.a.createElement("div",{className:"help-section-container"},r.a.createElement("div",{className:"help-section-title"},"Any last words?"),r.a.createElement("div",{className:"help-section-text"},"I understand that there is a lot of room for improvement(and features that need to be fixed) but because this is just a personal project that I made for fun, I'm not gonna take my time to fix it(unless requested by my friend). So if there is a problem...just deal with it."))))):null}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(h.a)(t).call(this,e))).state={show_help:!1},a.showHelp=a.showHelp.bind(Object(m.a)(Object(m.a)(a))),a.hideHelp=a.hideHelp.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"showHelp",value:function(){this.setState({show_help:!0})}},{key:"hideHelp",value:function(){this.setState({show_help:!1})}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(d,{showHelp:this.showHelp}),r.a.createElement(v,null,r.a.createElement(f,null)),r.a.createElement(w,null),r.a.createElement(k,{show_help:this.state.show_help,hideHelp:this.hideHelp}))}}]),t}(n.Component);a(21),a(23);i.a.render(r.a.createElement(_,null),document.getElementById("root"))}},[[11,2,1]]]);
//# sourceMappingURL=main.b31b315b.chunk.js.map